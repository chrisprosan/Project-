<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">

  <title>Budgets</title>

  <link type="text/css" rel="stylesheet" href="style/landing-page.css">
  <link type="text/css" rel="stylesheet" href="style/budgets-page.css">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
</head>

<body>
  <!-- Header Container -->
  <div id="container">
    <div id="parent_div" class="parentElement">
      <div id="header" class="childElement">
        <div id="blueFiltered"></div>
      </div>
      <div id="headerContainer">
        <div id="topBar">
          <a href="index.html"><img id="logo" class="topBarImage" src="images/Logos/8862_Cash%20Flows_A_03.png"></a>
        </div>
      </div>
    </div>
  </div>
  <!-- Main Body -->
  <div id="content">
    <!-- Active Budgets Selector -->
    <div id="activeBudgets">
      <div id="activeBudgetsHeader" class="dropdownHeader">
        <input id="activeBudgetsActualDropdown" type="text" list="budgets" class="properDropdown"
          placeholder="Active Budget" oninput='onInput()'>
      </div>
        <!-- This holds all of the dropdowns down from "Active Budget" -->
        <div id="activeBudgetDropdownContainer">
          <div class="sideBySide dropdownHeader">
            <p class="label bigText">Budget Name</p>
            <div id="budgetNameSelectorShow">
              <input id="budgetNameShow" class="formSide" type="text" placeholder="">
            </div>
          </div>
          <div class="sideBySide dropdownHeader">
            <p class="label bigText">Time Interval (Weeks)</p>
            <div id="timeIntervelSelectorShow">
              <input id="timeIntervelShow" class="formSide" type="text" placeholder="Time Interval">
            </div>
          </div>
          <div class="sideBySide dropdownHeader">
            <p class="label bigText">Currency</p>
            <div id="currencySelectorShow">
              <input id="currencyShow" class="formSide" type="text" placeholder="Currency">
            </div>
          </div>
          <div id="tableGetContent">
            <div id="tableGetRow">
              <p class="gettingRow">[1] Catagory: Groceries, Limit: 50, Warning: 90%</p>
              <p class="gettingRow">[1] Catagory: Groceries, Limit: 50, Warning: 90%</p>
              <p class="gettingRow">[1] Catagory: Groceries, Limit: 50, Warning: 90%</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Create A Budget Field -->
    <div id="createBudgets">
      <div id="createBudgetsHeader" class="dropdownHeader">
        <p>Create A Budget</p>
      </div>
      <!-- This holds all of the dropdowns down from "Create A Budget" -->
      <div id="createBudgetDropdownContainer">
        <form>
          <div class="sideBySide dropdownHeader">
            <p class="label">Budget Name</p>
            <div id="budgetNameSelector">
              <input id="budgetName" class="formSide" type="text" placeholder="Ex: Common Budget" required="required">
            </div>
          </div>
          <div class="sideBySide dropdownHeader">
            <p class="label">Time Interval (Weeks)</p>
            <div id="timeIntervelSelector">
              <input id="timeIntervel" class="formSide" type="text" placeholder="Ex: 4" required="required">
            </div>
          </div>
          <div class="sideBySide dropdownHeader">
            <p class="label">Currency*</p>
            <div id="currencySelector">
              <input id="currency" class="formSide" type="text" placeholder="Ex: CAD">
            </div>
          </div>
          <!-- This holds the table -->
          <div id="tableContainer">
            <div id="table">
              <div class="rowHeader">
                <p class="headerCell cell">Categories</p>
                <p class="headerCell cell">Limit</p>
                <p class="headerCell cell">Warning At</p>
              </div>
              <div class="row">
                <input id="category" class="headerCell cell category" placeholder="Category" required="required">
                <input id="limit" class="headerCell cell limit" placeholder="Limit" required="required">
                <input id="notify" class="headerCell cell notify" placeholder="Warning At" required="required">
              </div>
              
            </div>
            <img src="images/plus.png" id="plus">
            <input type="button" id="createBudgetButton" value="Create Budget">
          </div>
        </form>
      </div>
      <!-- Popular Budgets Field -->
      <div id="popularBudgets">
        <div id="popularBudgetsHeader" class="dropdownHeader">
          <p>Popular Budgets</p>
        </div>
        <!-- This holds all of the budgets and the sort function -->
        <div id="popularBudgetDropdownContainer">
          <div class="sideBySide dropdownHeader">
            <p class="label">Sort By</p>
            <form id="filter2">
              <input list="sorting" class="popularDropdown">
            </form>
          </div>
          <!-- This is one budget (Hard Coded in) -->
          <div id="popularBudgetsContainer">
            <div id="popBudgetHeader">
              <div id="creation">
                <p id="name">Broke College Student Budget</p>
                <p id="creator">BCITStudent1239</p>
              </div>
            </div>
            <div id="popBudgetSpace">
              <div id="popBudgetText">
                <p>Hello here is some info about the budget.</p>
              </div>
            </div>
            <input type="button" id="addToLibraryButton" value="Add to Library">
          </div>
          <!-- This is one budget (Hard Coded in) -->
          <div id="popularBudgetsContainer">
            <div id="popBudgetHeader">
              <div id="creation">
                <p id="name">Rich Ivy League Student Budget</p>
                <p id="creator">HarvardCalls983</p>
              </div>
            </div>
            <div id="popBudgetSpace">
              <div id="popBudgetText">
                <p>Hello here is some text about the budget.</p>
              </div>
            </div>
            <input type="button" id="addToLibraryButton" value="Add to Library">
          </div>
        </div>
      </div>
    </div>
    <div id="footer">
      <a href="BudgetPage.html">
        <div id="expensesButton">
          <img src="images/list.png" class="navImages blackenImage">
          <p class="responsiveText">Budgets</p>
        </div>
      </a>
      <a href="ExpensesPage.html">
        <div id="transactionsButton">
          <img src="images/039-512.png" class="navImages blackenImage">
          <p class="responsiveText">Transactions</p>
        </div>
      </a>
      <a id="account" href="login.html">
        <div id="AccountsButton">
          <img src="images/personlogo.png" class="navImages blackenImage">
          <p id="signInButton" class="responsiveText">Sign In</p>
          <p id="signOutButton" class="responsiveText" onclick="signOut()">Sign Out</p>
        </div>
      </a>
    </div>
  </div>
  <!-- Datalists -->
  <datalist id="budgets">
    <option class="dataOption" value="Project X">
    <option class="dataOption" value="Project Y">
    <option class="dataOption" value="Project Z">
  </datalist>

  <datalist id="sorting">
    <option class="dataOption" value="Uses">
    <option class="dataOption" value="Views">
    <option class="dataOption" value="Ratings">
  </datalist>

  <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-app.js"></script>
  <script src="./scripts/app-config.js"></script>
  <script src="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-firestore.js"></script>
  <script src="./scripts/app.js"></script>
  <script src="./scripts/budget.js"></script>
  <script>
    // Function for changing the display type of the "dropdown" create budgets subheading.
    function createBudgets() {
      document.getElementById("createBudgetsHeader").addEventListener("click", function () {
        if (document.getElementById("createBudgetDropdownContainer").style.display == "block") {
          console.log("Create Budgets Widget Hidden");
          document.getElementById("createBudgetDropdownContainer").style.display = "none";
        } else {
          document.getElementById("createBudgetDropdownContainer").style.display = "block";
          console.log("Create Budgets Widget Shown");
        }
      })
    }
    
    // Function for changing the display type of the "dropdown" popular budgets subheading.
    function popularBudgets() {
      document.getElementById("popularBudgetsHeader").addEventListener("click", function () {
        if (document.getElementById("popularBudgetDropdownContainer").style.display == "block") {
          console.log("Popular Budgets Widget Hidden");
          document.getElementById("popularBudgetDropdownContainer").style.display = "none";
        } else {
          document.getElementById("popularBudgetDropdownContainer").style.display = "block";
          console.log("Popular Budgets Widget Shown");
        }
      })
    }

    // Function for changing the display type of the "dropdown" active budget subheading.
    function activeBudgets() {
      document.getElementById("activeBudgetsHeader").addEventListener("click", function () {
        if (document.getElementById("activeBudgetDropdownContainer").style.display == "block") {
          console.log("Active Budget Widget Hidden");
          document.getElementById("activeBudgetDropdownContainer").style.display = "none";
        } else {
          document.getElementById("activeBudgetDropdownContainer").style.display = "block";
          console.log("Active Budget Widget Shown");
        }
      })
    }

    // Function for appending a row to the table in "create a budget".
    function appendRow() {
      document.getElementById("plus").addEventListener("click", function () {
        var row = document.createElement("div");
        row.setAttribute("class", "row");
        var catagory = document.createElement("input");
        catagory.setAttribute("class", "headerCell cell");
        catagory.setAttribute("placeholder", "Catagory");

        var limit = document.createElement("input");
        limit.setAttribute("class", "headerCell cell");
        limit.setAttribute("placeholder", "Limit");

        var notif = document.createElement("input");
        notif.setAttribute("class", "headerCell cell");
        notif.setAttribute("placeholder", "Warning At");

        $(".row").last().after(row);
        $(".row").last().append(catagory, limit, notif);
        console.log("Table Row Added");
      })
    }

    // Function for grabbing the value inputted into Active Budget selection.
    // function onInput() {
    //   var val = document.getElementById("activeBudgetsActualDropdown").value;
    //   var opts = document.getElementById('budgets').childNodes;
    //   for (var i = 0; i < opts.length; i++) {
    //     if (opts[i].value === val) {
    //       console.log("You chose: " + val);
    //       break;
    //     }
    //   }
    // }

    activeBudgets();
    createBudgets();
    popularBudgets();
    appendRow();
  </script>
</body>

</html>